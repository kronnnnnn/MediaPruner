Git branching & workflow

This project follows a simplified GitFlow-inspired process to keep work organized and stable.

Branches
- main: production-ready code. Only merge here after features/release testing and passing CI.
- develop: integration branch for completed features. Feature branches are branched off `develop`.
- feature/*: short-lived branches for new features or improvements. Example: `feature/queue-sse`.
- release/*: optional branches for preparing a release from `develop` to `main`.
- hotfix/*: immediate fixes branched from `main` and merged back into both `main` and `develop`.

Conventions
- Branch names: use lowercase and slashes, e.g., `feature/brief-description`.
- PRs: target `develop` for feature PRs; target `main` for release/hotfix PRs.
- Tests & CI: run tests and linters locally; CI must pass before merging.
- Commit messages: use `type(scope): message` style (e.g., `fix(queue): resolve tmdb search fallback`).

Suggested protections & CI
- Protect `main` with required reviews and passing CI checks.
- Optionally protect `develop` to require CI and at least one approving review before merging.

Getting started
1. Create a feature branch:
   git checkout -b feature/your-feature develop
2. Make commits, push, and open a PR targeting `develop`.
3. After review & CI, merge into `develop`.
4. When ready for a release, create `release/x.y.z` from `develop`, test, then merge into `main`.

Notes
- We currently have only `main` and `develop` branches; feature branches should be created from `develop` going forward.

Enforcement (GitFlow strict)
- The repository **default branch will be `develop`** so new PRs target `develop` by default.
- All feature work MUST be opened as PRs targeting `develop` and must pass CI and peer review before merging.
- Releases are prepared from `develop` via `release/*` branches and merged into `main` for production deployment.

- Automated approvals and Copilot labeling: We run two GitHub Actions workflows to safely automate approvals when CI passes:
  - `copilot-review.yml` — runs when the `CI` workflow completes successfully and performs an automated "Copilot review"; it will add the `copilot-approved` label and post a short comment when no obvious issues are detected.
  - `gpt-auto-approve.yml` — runs after CI finishes and will only post an approval review if the `copilot-approved` label is present on the PR.

  The auto-approver supports using a machine user Personal Access Token (PAT) stored in the repository secrets as `AUTO_APPROVE_PAT`. If `AUTO_APPROVE_PAT` is provided, approvals will be posted under that machine user (preferred for satisfying branch protection requirements that require reviews from accounts with write access). If not provided, approvals are posted as `github-actions[bot]`.

  Setup guidance:
  - Create a machine/bot GitHub account (recommended) or use a service account with minimal necessary permissions.
  - Generate a Personal Access Token for that account (not a random GUID). The token must have appropriate repo scopes to allow creating pull request reviews/approvals (e.g., `repo` scopes).
  - Add the token to the repository secrets: Settings → Secrets and variables → Actions → New repository secret → name it `AUTO_APPROVE_PAT`.

  Security & process notes:
  - Keep PATs in repository or organization secrets, rotate them periodically, and grant the machine user only the permissions it needs.
  - The `copilot-approved` label is an auditable signal and is added by `copilot-review.yml` only after CI passes.
  - If you prefer manual control, you can omit `AUTO_APPROVE_PAT` and rely on human approvals; the workflows will still add the label and optionally approve as `github-actions[bot]` depending on branch protection rules.

*Generated by GitHub Copilot.*